> 下文中的下载方既表示客户端也表示服务端，当用户上传数据时，服务端为下载方，当用户下载数据时，用户为下载方。

断点续传的功能由下载方实现。每次下载文件之前，都会创建一个临时文件，并将下载的数据存放在临时文件中，以及每个临时文件都会有一个对应的`.autosave`文件，该文件保存该临时文件当前已经下载完成了的文件块索引。

#### 客户端
客户端登陆后，会在临时文件目录中查找是否存在文件，如果存在文件，根据其中的文件块索引恢复下载。

#### 服务端
服务器接受到新登陆用户后，会在下表中查找对应用户上传文件的断点续传信息，然后将信息发送给用户，由用户决定是否需要恢复上传，如果拒绝，则删除对应文件。
|字段|类型|说明|
|--|--|--|
|email|text|用户邮箱|
|tmp_path|text|分号分割的临时文件路径|

只有当临时文件上传完成，才会进入下一步的文件管理。